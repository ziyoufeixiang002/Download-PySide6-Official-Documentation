name: Download PySide Source

on:
  workflow_dispatch:  # 仅手动触发
  push:
    branches: [ main, master ]

jobs:
  download-source:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Clone PySide source
      run: |
        git clone --depth 1 https://code.qt.io/pyside/pyside-setup.git
        cd pyside-setup
        git submodule update --init --recursive
        
    - name: Display source info
      run: |
        cd pyside-setup
        echo "PySide source cloned successfully"
        echo "Current branch: $(git branch --show-current)"
        echo "Latest commit: $(git log -1 --oneline)"
        
    - name: Upload source code
      uses: actions/upload-artifact@v4
      with:
        name: pyside-source
        path: pyside-setup/
        retention-days: 30
